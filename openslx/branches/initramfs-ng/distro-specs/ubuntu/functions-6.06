# Copyright (c) 2003 - 2006 - RZ Uni Freiburg
# Copyright (c) 2006, 2007 - OpenSLX GmbH
#
# This program is free software distributed under the GPL version 2.
# See http://openslx.org/COPYING
#
# If you have any feedback please consult http://openslx.org/feedback and
# send your feedback to feedback@openslx.org
#
# General information about OpenSLX can be found at http://openslx.org
#
# Configuration script for Ubuntu V6.06 to configure OpenSLX linux stateless
# clients (merged in stage2 with ubuntu/functions-default - and loaded within
# initial ramfs - stage3). It may overwrite settings from the default config
# file (/etc/functions)

# distro specific stuff to initialize
preinit () {
  echo "Creating dhcp user"
  echo "dhcp:x:101:">>/etc/group
  echo "dhcp:x:101:101::/nonexistent:/bin/false" >>/etc/passwd
  # mount/unionfs can not handle the nfsro parameter in Ubuntu 6.06 
  NFSRO=""
}

# set up keytable (function run in hwautocfg)
# fixme: is anything needed here - otherwise remove (and check that a 
# dummy function is present)
keytable () {
# fixme -- use keytable setup script here
:
}

# consolefont and language
consolefont () {
[ "$LANG" == "de_DE@euro" ] && LANG=de_DE.UTF8
sed -e "s,LANGUAGE=.*,LANGUAGE=${LANG},;s,LANG=.*,LANG=${LANG}," \
    -i /mnt/etc/environment
rllinker "console-screen.sh" 31 3
}
