# udev service - not checked!
udev_hotplug () {
local result=0
echo "Starting udev"
udevstart || result=1
if [ -x /bin/udevd ] ; then
  export UDEVD_EXPECTED_SEQNUM=$(cat /sys/kernel/hotplug_seqnum)
  export UDEVD_EVENT_TIMEOUT=1
  echo "" > /proc/sys/kernel/hotplug
  udevd --daemon || result=1
else error "  udev daemon is not available. Some devices might not \
apprear." nonfatal
fi
return $result
}

# initialize boot.ld - skript to be executed during early system startup
# (before most of the normal boot init scripts)
# this script should operate like a normal runlevel script
d_mkbootld () {
case "$1" in
  init)
    echo -e "#!/sbin/runskript\n# skeleton of /etc/${D_INITDIR}/boot.ld \
written from $0" >/mnt/etc/${D_INITDIR}/boot.ld
    echo -e '\n\nstart() {' \
      >>/mnt/etc/${D_INITDIR}/boot.ld
    echo -e '\tebegin "Running post configuration required by initrd"' \
      >>/mnt/etc/${D_INITDIR}/boot.ld
    chmod u+x /mnt/etc/${D_INITDIR}/boot.ld
  ;;
  close)
    echo -e "\teend ${?}\n}" \
      >>/mnt/etc/${D_INITDIR}/boot.ld
  ;;
esac
}
