# Description:  configuration functions for SuSE 10.1 which differ from
#		functions defined for SuSE 9.3 and 10.0 which are base ... 
#		General changes should be done there, version specific 
#		changes for the 10.1 here.
#
# Author(s):    Dirk von Suchodoletz <dirk@goe.net>, 20-05-2006
#
# Copyright:    (c) 2006 - RZ Universitaet Freiburg
# 
# Version:      0.2.1e

# distro specific stuff to initialize
preinit () {
for i in usb_id scsi_id vol_id edd_id ata_id path_id hwup ifup ; do
  echo -e "#!/bin/sh\n:" >/sbin/$i
done
mkdir /lib/udev /usr/sbin
for i in idedma.sh mount.sh rename_netiface create_floppy_devices ; do
  echo -e "#!/bin/sh\n:" >/lib/udev/$i
done
echo -e "#!/bin/sh\n:" >/usr/sbin/alsactl
chmod u+x /sbin/* /lib/udev/* /usr/sbin/*
}

postinit () {
:
}

# udev service
udev_hotplug () {
local result=0
echo "Starting udev"
#mknod /dev/console c 5 1
#mknod /dev/null c 1 3
#mknod /dev/kmsg c 1 11
if [ -x /bin/udevd ] ; then
  echo "" > /proc/sys/kernel/hotplug
  udevd --daemon || result=1
  trigger_device_events
  usleep 50
else error "  udev daemon is not available. Some devices might not \
apprear." nonfatal
fi
return $result
}

