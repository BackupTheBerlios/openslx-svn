###################################################################
##### /etc/dhcpd.conf                                         #####
#####                                                         #####
##### Configuration file for ISC dhcpd                        #####
#####                                                         #####
#####     LAST MODIFIED ON 2004/10/19                         #####
#####                   BY mj0                                #####
#####                                                         #####
##### (c) Dirk von Suchodoletz <dirk@goe.net>, 2002           #####
###################################################################

###################################################################
#####                                                         #####
#####           !!! user defined vendor options !!!           #####
#####                                                         #####
###################################################################

option o128 code 128              = string;
option o129 code 129              = string;
option menudflts code 160         = string;
option motdline1 code 184         = string;
option menuline1 code 192         = string;
option menuline2 code 193         = string;
option menuline3 code 194         = string;
option bootlocal-script code 221  = string;
option language code 222          = string;
option start-x code 223           = string;
option start-snmp code 224        = string;
option start-sshd code 225        = string;
option start-xdmcp code 226       = string;
option start-cron code 227        = string;
option crontab-entries code 228   = string;
option start-rwhod code 229       = string;
option start-printdaemon code 230 = string;
option desktop-session code 231   = string;
option tex-enable code 232	  = string;
option netbios-workgroup code 233 = string;
option vmware code 234   	  = string;
option hw-mouse code 252          = string;
option hw-graphic code 253        = string;
option hw-monitor code 254        = string;

###################################################################
#####                                                         #####
#####      !!! vendor identifier dependend settings !!!       #####
#####                                                         #####
###################################################################

class "Etherboot" {
    match if substring (option vendor-class-identifier, 0, 9) = "Etherboot";
        option motdline1  = "Welcome to Guru Labs classroom";
 	option vendor-encapsulated-options 3c:09:45:74:68:65:72:62:6f:6f:74:ff;
}

###################################################################
#####                                                         #####
#####            !!! server specific options !!!              #####
#####                                                         #####
###################################################################

server-identifier		   @@@server@@@;

###################################################################
#####                                                         #####
#####                 !!! global options !!!                  #####
#####                                                         #####
###################################################################
# description for several options:
# A. x-server-defs "de PS/2 psaux 96 100 1280x1024 nv 16"
#  - Sets several values for XFree86 V 4.0.X
#
#  1. keyboard  de/us
#  2. mouse typ PS/2/MouseMan/MicroSoft/... 
#  3. mouse device psaux/ttyS0X
#  4. horiz. freq. monitor 40 - 96 (depending on monitor)
#  5. vert. freq. monitor 56 -120  (depending on monitor)
#  6. max. resolution
#  7. graphic server module  mga/i810/nv/ati/... (depends on hardware)
#  8. display color depth 8/16/24
#
# you will need the x-display-manager because
# it is required by dhclient.conf.
# change "require" within this file
#
#    option x-display-manager server01,server02,server03;
#    option netbios-name-servers 13.30.19.254;
#    option ntp-servers ntps1,ntps2,ntps3;
#
# type of graphical login/operation - indirect for
# chooser, query for login kde,gnome,... for direct
# graphical session (managed by startgui script)
#
# type of displaymanager to use (it should be installed
# correctly on the server: XDMCP must be enabled then!)

option o128                        E4:45:74:68:00:00;
#deny                               unknown-clients;
allow				   bootp;
#allow				   booting;
default-lease-time                 160000;
max-lease-time                     200000;
use-host-decl-names                on;
option dhcp-max-message-size       1024;
ddns-update-style                  none;

###################################################################
#####                                                         #####
#####              !!! net specific options !!!               #####
#####                                                         #####
################################################################### 

subnet @@@netname@@@ @@@netmask@@@ {
	option broadcast-address @@@broadcast@@@;
	option routers @@@server@@@;
}


###################################################################
#####                                                         #####
##### GLOBAL-GROUP:                                           #####
##### Group for global options                                #####
#####                                                         #####
###################################################################

group {

    if substring(option vendor-class-identifier,0,3) = "PXE" {
	allow booting;
        filename "/tftpboot/pxelinux.0"; }
    elsif substring(option vendor-class-identifier,0,3) = "DXS" {
	allow booting; }
    elsif substring(option vendor-class-identifier,0,4) = "MSFT" {
        allow booting; }
#    elsif substring(option vendor-class-identifier,0,3) = "FLA" {
#        allow booting;
#        option start-x "windowmaker";
#	 option start-xdmcp "no";
#	 option start-rwhod "no";
#	 option start-cron "no";
#	 option start-snmp "no"; }
#    elsif substring(option vendor-class-identifier,0,9) = "Etherboot" {
#	allow booting;
#       filename "/nfsroot/dxs2/boot/bootimg"; }
    else { ignore booting; }

#    option root-path "/nfsroot/dxs2";
    option domain-name-servers 132.230.200.200,132.230.200.201;
    option domain-name "lp.ruf.uni-freiburg.de ruf.uni-freiburg.de uni-freiburg.de dxs.local";
    option ntp-servers 132.230.1.9;
    option crontab-entries "59 21  * * * root shutdown -h now";
#    option lpr-servers 10.22.9.254;
#    option nis-servers 10.16.10.11;
#    option nis-domain "linuxpc";
#    option font-servers 10.16.10.61;
    option start-x "direct";
    option start-xdmcp "kdm";
    option start-rwhod "yes";
    option start-cron "yes";
    option start-snmp "no";
    option netbios-workgroup "tux-net";
    option tex-enable "yes";
    option vmware "yes";
    option desktop-session "kde,gnome,windowsxp"; # VMWARE-IMAGE-ADMINISTER
    option language "de_DE de-latin1-nodeadkeys";
#    option hw-mouse "ps/2 psaux";
    option hw-monitor "30-65kHz 58-76Hz 1280x1024";
#    option hw-graphic "nv 15";
    option bootlocal-script "";
    option o129 "vga=0x0317 apic";

###################################################################
#####                                                         #####
##### GROUP 1:                                                #####
##### Lehrstuhl (lsfks), Beratung                             #####
#####                                                         #####
###################################################################

 group {
    option crontab-entries "";
#   group specific options:

#   group ip management:
###################################################################
# Grafikstation
    host example1 {
        hardware ethernet 00:02:B3:8D:83:12;
        fixed-address @@@example1@@@;
    }
    host example2 {
        hardware ethernet 00:50:56:0D:83:12;
        fixed-address @@@example2@@@;
    }

 }
}
